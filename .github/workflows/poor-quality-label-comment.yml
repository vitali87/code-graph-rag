name: Poor Quality Label Comment

on:
  pull_request_target:
    types: [labeled]

jobs:
  comment-on-poor-quality:
    if: github.event.label.name == 'poor-quality'
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - name: Add warning comment
        uses: actions/github-script@v7
        with:
          script: |
            const message = `⚠️ **This PR has been marked as poor-quality.**

            This PR will be **automatically closed in 7 days** unless the author refactors it to meet our [CONTRIBUTING.md](../blob/main/CONTRIBUTING.md) standards.

            Please review the contribution guidelines and update this PR accordingly.`;

            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.payload.pull_request.number,
              body: message
            });
